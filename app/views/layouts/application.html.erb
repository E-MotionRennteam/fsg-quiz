<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= content_for?(:title) ? yield(:title) : "FSG-Quiz by munichmotorsport" %></title>
    <%= csrf_meta_tags %>

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <%= stylesheet_link_tag "application", :media => "all" %>

    <!-- For third-generation iPad with high-resolution Retina display: -->
    <!-- Size should be 144 x 144 pixels -->
    <%= favicon_link_tag 'apple-touch-icon-144x144-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '144x144' %>

    <!-- For iPhone with high-resolution Retina display: -->
    <!-- Size should be 114 x 114 pixels -->
    <%= favicon_link_tag 'apple-touch-icon-114x114-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '114x114' %>

    <!-- For first- and second-generation iPad: -->
    <!-- Size should be 72 x 72 pixels -->
    <%= favicon_link_tag 'apple-touch-icon-72x72-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '72x72' %>

    <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
    <!-- Size should be 57 x 57 pixels -->
    <%= favicon_link_tag 'apple-touch-icon-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png' %>

    <!-- For all other devices -->
    <!-- Size should be 32 x 32 pixels -->
    <%= favicon_link_tag 'favicon.ico', :rel => 'shortcut icon' %>
  </head>
  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/">FSG-Quiz</a>
          <div class="container nav-collapse">
            <ul class="nav">
              <% if user_signed_in? %>
                <li><a href="#quizModal" data-toggle="modal">Take Quiz</a></li>
                <% if current_user.admin%>
                  <li><%= link_to "Create Quiz", "/quizzes/new" %></li>
                <% end %>
              <% end %>
            </ul>
            <ul class="nav pull-right">
                <% if user_signed_in? %>
                  <li><a href="#profileModal" data-toggle="modal">Profile</a></li>
                  <li class="divider-vertical"></li>
                  <li><%= link_to("Logout", destroy_user_session_path, :method=>"delete") %></li> 
                <% else %>
                  <li><a href="#signupModal" data-toggle="modal">Sign up</a></li>
                  <li>
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                      Login
                      <span class="caret"></span>
                    </a>
                    <div class="dropdown-menu" role="menu" 
                    style="padding-top:20px; padding-left:15px; padding-right:15px;">
                      <%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>
                        <div><%= f.label :email %>
                        <%= f.email_field :email, :autofocus => true %></div>

                        <div><%= f.label :password %>
                        <%= f.password_field :password %></div>

                        <% if devise_mapping.rememberable? -%>
                          <div style="padding-bottom:15px;">
                            <%= f.check_box :remember_me %>
                            <p class="pull-right" style="position:relative; top:3px;">
                              <%= f.label :remember_me %>
                            </p>
                        </div>
                        <% end -%>

                        <div>
                          <%= f.submit "Sign in" %>
                        </div>
                      <% end %>
                    </div>
                  </li>
                <% end %>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>
    
    <!-- quizModal -->
    <div id="quizModal" class="modal hide fade" tabindex="-1"
    role="dialog" aria-labelledby="quizModalLabel" aria-hidden="true">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="quizModalLabel">Modal header</h3>
      </div>
      <div class="modal-body">
        <p>One fine body…</p>
      </div>
      <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
      </div>
    </div>
    
    <!-- signupModal -->
    <div id="signupModal" class="modal hide fade my-modal" tabindex="-1"
    role="dialog" aria-labelledby="signupModalLabel" aria-hidden="true">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="signupModalLabel">Sign up</h3>
      </div>
      <div class="modal-body">
        <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
          <%= devise_error_messages! %>

          <div><%= f.label :email %>
          <%= f.email_field :email, :autofocus => true %></div>

          <div><%= f.label :password %>
          <%= f.password_field :password %></div>

          <div><%= f.label :password_confirmation %>
          <%= f.password_field :password_confirmation %></div>

          <div><%= f.submit "Sign up" %></div>
        <% end %>
      </div>
    </div>
    
    <!-- profileModal -->
    <div id="profileModal" class="modal hide fade" tabindex="-1"
    role="dialog" aria-labelledby="profileModalLabel" aria-hidden="true">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="profileModalLabel">Edit Profile</h3>
      </div>
      <div class="modal-body">
        <% if user_signed_in? %>
          <p style="font-size: 14px;"><i>You are signed in as <%= current_user.email %></i></p>
            <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>
              <%= devise_error_messages! %>
  
              <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
                <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
              <% end %>
            
              <div><%= f.label :password, "New Password", :class => "profile-label" %>
              <%= f.password_field :password, :autocomplete => "off", :class => "profile-input" %></div>
  
              <div><%= f.label :password_confirmation, :class => "profile-label" %>
              <%= f.password_field :password_confirmation, :class => "profile-input" %></div>
  
              <div><%= f.label :current_password, :class => "profile-label" %>
              <%= f.password_field :current_password, :class => "profile-input", :style => "margin-bottom: 25px;" %></div>
  
              <div><%= f.submit "Update" %></div>
            <% end %>
            <div><%= label :master_password, "Master Password", :class => "profile-label" %>
            <%= password_field :master_password, "Enter here", :class => "profile-input" %></div>
          <p style="font-size: 14px;">Become admin? <%= button_to "Yes, please!", "welcome/index", :data => { :confirm => "Are you sure?" }, :method => :get %></p>
          <p style="font-size: 14px;">Delete account? <%= button_to "Do it!", registration_path(resource_name), :data => { :confirm => "Are you sure?" }, :method => :delete %></p>
        <% else %>
          Sorry, you're not signed in.
        <% end %>
      </div>
    </div>

    <div class="container">
      <%= bootstrap_flash %>
      <%= yield %>
      
      <footer>
        <p class="text-center">&copy; <%= link_to "municHMotorsport", "http://www.munichmotorsport.de", :target => "munichmotorsport Website" %> 2013</p>
      </footer>

    </div> <!-- /container -->

    <%= javascript_include_tag "application" %>

  </body>
</html>
